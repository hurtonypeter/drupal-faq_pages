<div ng-app="probaApp">
  <div ng-controller="probaCtrl">

    <div class="clearfix">
      <div style="width:70%;float:left;">
        <div class="form-item form-type-textfield">
          <label for="edit-faq-page-title">Title</label>
          <input type="text" id="edit-faq-page-title" class="form-text" size="60" ng-model="title" />
        </div>
        <div class="form-item form-type-textfield">
          <label for="edit-faq-page-path">Path</label>
          <input type="text" id="edit-faq-page-path" class="form-text" size="60" ng-model="url" />
        </div>
        <div class="form-item form-type-textarea form-item-faq-description">
          <label for="edit-faq-page-description">Description</label>
          <div class="form-textarea-wrapper">
            <textarea rows="5" cols="60" id="edit-faq-page-description" class="form-textarea resize-vertical" ng-model="description"></textarea>
          </div>
        </div>

        <h2>Blocks</h2><a href="" ng-click="log()">log</a>
        <div ng-repeat="block in blocks" style="border:1px solid #ccc;padding:10px;margin-bottom:15px;">
          <label>Block title</label>
          <input type="text" ng-model="block.name" />
          <label>Description</label>
          <textarea ng-model="block.description"></textarea>
          <label>Terms</label>
          <table>
            <tbody data-drop="true" ng-model="block.terms" jqyoui-droppable="{multiple:true}">
              <tr ng-repeat="term in block.terms track by $index" 
                ng-show="term.name" 
                data-drag="true"
                data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" 
                ng-model="block.terms" 
                jqyoui-draggable="{index: {[{$index}]},animate:true}"
                ui-sortable>
                <td><a href="" ng-show="!$first" ng-click="termUp($index, $parent.$index)">up</a></td>
                <td><a href="" ng-show="!$last" ng-click="termDown($index, $parent.$index)">down</a></td>
                <td>{[{term.name}]}</td>
              </tr>
              <tr colspan="3" ng-show="hideMe(block.terms)"><td>((Add your items here))</td></tr>
            </tbody>
          </table>
        </div>
        <p><a href="" ng-click="newBlock()">Add new block</a></p>
      </div>
      
      <div style="width:27%;float:left;padding-left:3%;">
        <h2>Taxonomy terms</h2>
        <p>Drag from here the terms you would like to add to a block.</p>
        <ul>
          <li ng-repeat="term in terms" 
              ng-show="term.name" 
              data-drag="true"
              data-jqyoui-options="{revert: 'invalid', helper: 'clone'}"
              ng-model="terms"
              jqyoui-draggable="{index: {[{$index}]}, placeholder: 'keep'}"
              style="cursor: move;">{[{term.name}]}</li>
        </ul>
      </div>
    </div>

    {[{blocks}]}


  </div>
</div>